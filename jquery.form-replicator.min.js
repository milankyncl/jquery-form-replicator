
/**
 * jQuery Form Replicator
 * ----------------------
 * @author Milan Kyncl <kontakt@milankyncl.cz>
 * @package jquery-form-replicator
 * @licence MIT
 */

$.fn.formReplicator=function(e,t){if(void 0===e)return!1;var n=$.extend({firstItemUndeletable:!1,onHide:function(e){e.fadeOut(function(){$(this).remove()})},onShow:function(e){e.fadeIn()}},t),i=this,a=i.find("[data-group-item]"),o=i.find("[data-group-add-item]"),d=0,r=$(a.get(0)).clone();a.each(function(t){var i=$(this);n.firstItemUndeletable&&0===t&&i.find("[data-group-remove-item]").hide(),i.find("select, input, textarea").each(function(){i.attr("name",e+"["+t+"]["+i.attr("name")+"]")}),i.find("[data-group-remove-item]").on("click",function(e){e.preventDefault(),n.onHide(i)}),d++}),o.length>0&&o.on("click",function(t){t.preventDefault();var a=i.find("[data-group-inner]");if(a.length>0){var o=r.clone();o.addClass("clone"),o.find("select, input, textarea").each(function(){$(this).attr("name",e+"["+d+"]["+$(this).attr("name")+"]"),$(this).val("")}),o.find("[data-group-remove-item]").on("click",function(e){e.preventDefault(),n.onHide(o)}),o.hide(),a.append(o),n.onShow(o),d++}})};